"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8806],{5680:(e,t,n)=>{n.d(t,{xA:()=>u,yg:()=>g});var r=n(6540);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=r.createContext({}),l=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=l(e.components);return r.createElement(s.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),c=l(n),d=o,g=c["".concat(s,".").concat(d)]||c[d]||m[d]||a;return n?r.createElement(g,i(i({ref:t},u),{},{components:n})):r.createElement(g,i({ref:t},u))}));function g(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=d;var p={};for(var s in t)hasOwnProperty.call(t,s)&&(p[s]=t[s]);p.originalType=e,p[c]="string"==typeof e?e:o,i[1]=p;for(var l=2;l<a;l++)i[l]=n[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},7446:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>m,frontMatter:()=>a,metadata:()=>p,toc:()=>l});var r=n(8168),o=(n(6540),n(5680));const a={sidebar_position:10},i="Vuex4",p={unversionedId:"Vuex4",id:"Vuex4",title:"Vuex4",description:"1_\u7ec4\u5408\u5f0fAPI",source:"@site/docs/Vuex4.md",sourceDirName:".",slug:"/Vuex4",permalink:"/docs/Vuex4",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Vuex4.md",tags:[],version:"current",sidebarPosition:10,frontMatter:{sidebar_position:10},sidebar:"tutorialSidebar",previous:{title:"Vuex3",permalink:"/docs/VueX"},next:{title:"miniProgramUpdate",permalink:"/docs/wxUpdate"}},s={},l=[{value:"1_\u7ec4\u5408\u5f0fAPI",id:"1_\u7ec4\u5408\u5f0fapi",level:2},{value:"\u8bbf\u95ee State \u548c Getter",id:"\u8bbf\u95ee-state-\u548c-getter",level:3},{value:"\u8bbf\u95ee Mutation \u548c Action",id:"\u8bbf\u95ee-mutation-\u548c-action",level:3},{value:"2_\u521b\u5efa",id:"2_\u521b\u5efa",level:2},{value:"3\u4f7f\u7528<code>new Vuex.Store(</code>)\u521b\u5efa",id:"3\u4f7f\u7528new-vuexstore\u521b\u5efa",level:3},{value:"4\u4f7f\u7528<code>createStore()</code>\u521b\u5efa",id:"4\u4f7f\u7528createstore\u521b\u5efa",level:3},{value:"3_\u83b7\u53d6",id:"3_\u83b7\u53d6",level:2},{value:"3\u4f7f\u7528<code>this.$store</code>\u83b7\u53d6store",id:"3\u4f7f\u7528thisstore\u83b7\u53d6store",level:3},{value:"4\u4f7f\u7528<code>useStore</code>\u83b7\u53d6store",id:"4\u4f7f\u7528usestore\u83b7\u53d6store",level:3},{value:"Vuex3\u548cVuex4\u90fd\u652f\u6301\u4f7f\u7528<code>$store</code>",id:"vuex3\u548cvuex4\u90fd\u652f\u6301\u4f7f\u7528store",level:3},{value:"4_\u8f85\u52a9\u51fd\u6570",id:"4_\u8f85\u52a9\u51fd\u6570",level:2}],u={toc:l},c="wrapper";function m(e){let{components:t,...n}=e;return(0,o.yg)(c,(0,r.A)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.yg)("h1",{id:"vuex4"},"Vuex4"),(0,o.yg)("h2",{id:"1_\u7ec4\u5408\u5f0fapi"},"1_\u7ec4\u5408\u5f0fAPI"),(0,o.yg)("p",null,"\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528 ",(0,o.yg)("inlineCode",{parentName:"p"},"useStore")," \u51fd\u6570\uff0c\u6765\u5728 ",(0,o.yg)("inlineCode",{parentName:"p"},"setup")," \u94a9\u5b50\u51fd\u6570\u4e2d\u8bbf\u95ee store\u3002\u8fd9\u4e0e\u5728\u7ec4\u4ef6\u4e2d\u4f7f\u7528\u9009\u9879\u5f0f API \u8bbf\u95ee ",(0,o.yg)("inlineCode",{parentName:"p"},"this.$store")," \u662f\u7b49\u6548\u7684\u3002"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},"import { useStore } from 'vuex'\n\nexport default {\n  setup () {\n    const store = useStore()\n  }\n}\n")),(0,o.yg)("h3",{id:"\u8bbf\u95ee-state-\u548c-getter"},"\u8bbf\u95ee State \u548c Getter"),(0,o.yg)("p",null,"\u4e3a\u4e86\u8bbf\u95ee state \u548c getter\uff0c\u9700\u8981\u521b\u5efa ",(0,o.yg)("inlineCode",{parentName:"p"},"computed")," \u5f15\u7528\u4ee5\u4fdd\u7559\u54cd\u5e94\u6027\uff0c\u8fd9\u4e0e\u5728\u9009\u9879\u5f0f API \u4e2d\u521b\u5efa\u8ba1\u7b97\u5c5e\u6027\u7b49\u6548\u3002"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},"import { computed } from 'vue'\nimport { useStore } from 'vuex'\n\nexport default {\n  setup () {\n    const store = useStore()\n\n    return {\n      // \u5728 computed \u51fd\u6570\u4e2d\u8bbf\u95ee state\n      count: computed(() => store.state.count),\n\n      // \u5728 computed \u51fd\u6570\u4e2d\u8bbf\u95ee getter\n      double: computed(() => store.getters.double)\n    }\n  }\n}\n")),(0,o.yg)("h3",{id:"\u8bbf\u95ee-mutation-\u548c-action"},"\u8bbf\u95ee Mutation \u548c Action"),(0,o.yg)("p",null,"\u8981\u4f7f\u7528 mutation \u548c action \u65f6\uff0c\u53ea\u9700\u8981\u5728 ",(0,o.yg)("inlineCode",{parentName:"p"},"setup")," \u94a9\u5b50\u51fd\u6570\u4e2d\u8c03\u7528 ",(0,o.yg)("inlineCode",{parentName:"p"},"commit")," \u548c ",(0,o.yg)("inlineCode",{parentName:"p"},"dispatch")," \u51fd\u6570\u3002"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},"import { useStore } from 'vuex'\n\nexport default {\n  setup () {\n    const store = useStore()\n\n    return {\n      // \u4f7f\u7528 mutation\n      increment: () => store.commit('increment'),\n\n      // \u4f7f\u7528 action\n      asyncIncrement: () => store.dispatch('asyncIncrement')\n    }\n  }\n}\n")),(0,o.yg)("h2",{id:"2_\u521b\u5efa"},"2_\u521b\u5efa"),(0,o.yg)("h3",{id:"3\u4f7f\u7528new-vuexstore\u521b\u5efa"},"3\u4f7f\u7528",(0,o.yg)("inlineCode",{parentName:"h3"},"new Vuex.Store("),")\u521b\u5efa"),(0,o.yg)("p",null,"\u9996\u5148\u4f7f\u7528",(0,o.yg)("inlineCode",{parentName:"p"},"new Vuex.Store()"),"\u521b\u5efa",(0,o.yg)("inlineCode",{parentName:"p"},"store"),"\u5b9e\u4f8b\u3002"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},"import Vue from 'vue'\nimport Vuex from 'vuex'\n\nVue.use(Vuex)\n\nconst store = new Vuex.Store({\n  state: {\n    count: 0\n  },\n  mutations: {\n    increment (state) {\n      state.count++\n    }\n  }\n})\n")),(0,o.yg)("p",null,"\u7136\u540e\u5728\u521b\u5efa",(0,o.yg)("inlineCode",{parentName:"p"},"Vue"),"\u5b9e\u4f8b\u7684\u65f6\u5019\u628a",(0,o.yg)("inlineCode",{parentName:"p"},"store"),"\u4f20\u9012\u8fdb\u53bb\u3002"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},"new Vue({\n  el: '#app',\n  store: store,\n})\n")),(0,o.yg)("h3",{id:"4\u4f7f\u7528createstore\u521b\u5efa"},"4\u4f7f\u7528",(0,o.yg)("inlineCode",{parentName:"h3"},"createStore()"),"\u521b\u5efa"),(0,o.yg)("p",null,"\u9996\u5148\u4f7f\u7528",(0,o.yg)("inlineCode",{parentName:"p"},"createStore()"),"\u521b\u5efa",(0,o.yg)("inlineCode",{parentName:"p"},"store"),"\u5b9e\u4f8b\u3002"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},"import { createStore } from 'vuex'\n\n// \u521b\u5efa\u4e00\u4e2a\u65b0\u7684 store \u5b9e\u4f8b\nconst store = createStore({\n  state () {\n    return {\n      count: 0\n    }\n  },\n  mutations: {\n    increment (state) {\n      state.count++\n    }\n  }\n})\n\n")),(0,o.yg)("p",null,"\u7136\u540e\u518d\u521b\u5efa",(0,o.yg)("inlineCode",{parentName:"p"},"Vue"),"\u5b9e\u4f8b\uff0c\u5e76\u5c06 ",(0,o.yg)("inlineCode",{parentName:"p"},"store")," \u5b9e\u4f8b\u4f5c\u4e3a\u63d2\u4ef6\u5b89\u88c5\u3002"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},"import { createApp } from 'vue'\n\nconst app = createApp({ /* \u6839\u7ec4\u4ef6 */ })\n\n// \u5c06 store \u5b9e\u4f8b\u4f5c\u4e3a\u63d2\u4ef6\u5b89\u88c5\napp.use(store)\n")),(0,o.yg)("h2",{id:"3_\u83b7\u53d6"},"3_\u83b7\u53d6"),(0,o.yg)("p",null,(0,o.yg)("inlineCode",{parentName:"p"},"Vuex3"),"\u548c",(0,o.yg)("inlineCode",{parentName:"p"},"Vuex4"),"\u5728\u83b7\u53d6\u65b9\u9762\u6709\u70b9\u5dee\u522b\uff0c\u4f46\u662f\u5728\u4f7f\u7528\u65b9\u9762\u5e76\u6ca1\u6709\u5dee\u522b\u3002"),(0,o.yg)("h3",{id:"3\u4f7f\u7528thisstore\u83b7\u53d6store"},"3\u4f7f\u7528",(0,o.yg)("inlineCode",{parentName:"h3"},"this.$store"),"\u83b7\u53d6store"),(0,o.yg)("p",null,(0,o.yg)("inlineCode",{parentName:"p"},"Vuex3"),"\u4f7f\u7528",(0,o.yg)("inlineCode",{parentName:"p"},"this.$store"),"\u6765\u83b7\u53d6",(0,o.yg)("inlineCode",{parentName:"p"},"store"),"\u5e76\u8fdb\u884c\u64cd\u4f5c\u3002"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},"this.$store.state // \u83b7\u53d6state\nthis.$store.getters // \u83b7\u53d6getters\nthis.$store.commit // \u63d0\u4ea4mutation\nthis.$store.dispatch // \u63d0\u4ea4action\n")),(0,o.yg)("h3",{id:"4\u4f7f\u7528usestore\u83b7\u53d6store"},"4\u4f7f\u7528",(0,o.yg)("inlineCode",{parentName:"h3"},"useStore"),"\u83b7\u53d6store"),(0,o.yg)("p",null,(0,o.yg)("inlineCode",{parentName:"p"},"Vuex4"),"\u4f7f\u7528",(0,o.yg)("inlineCode",{parentName:"p"},"useStore()"),"\u6765\u83b7\u53d6",(0,o.yg)("inlineCode",{parentName:"p"},"store"),"\u5e76\u8fdb\u884c\u64cd\u4f5c\u3002"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},"import {useStore} from 'vuex'\n\nconst store = useStore()\n\nstore.state // \u83b7\u53d6state\nstore.getters // \u83b7\u53d6getters\nstore.commit // \u63d0\u4ea4mutation\nstore.dispatch // \u63d0\u4ea4action\n")),(0,o.yg)("p",null,"\u867d\u7136",(0,o.yg)("inlineCode",{parentName:"p"},"Vuex4"),"\u63a8\u8350\u4f7f\u7528",(0,o.yg)("inlineCode",{parentName:"p"},"useStore()"),"\u6765\u83b7\u53d6",(0,o.yg)("inlineCode",{parentName:"p"},"store"),"\u3002\u4f46\u662f\u5e76\u6ca1\u6709\u79fb\u9664",(0,o.yg)("inlineCode",{parentName:"p"},"this.$store"),"\uff0c\u4f46\u662f\u5728",(0,o.yg)("inlineCode",{parentName:"p"},"<template>"),"\u548c",(0,o.yg)("inlineCode",{parentName:"p"},"Vue2"),"\u9009\u9879\u5f0f\u5199\u6cd5\u4e2d\u8fd8\u662f\u652f\u6301\u4f7f\u7528",(0,o.yg)("inlineCode",{parentName:"p"},"$store"),"\u7684\u3002"),(0,o.yg)("h3",{id:"vuex3\u548cvuex4\u90fd\u652f\u6301\u4f7f\u7528store"},"Vuex3\u548cVuex4\u90fd\u652f\u6301\u4f7f\u7528",(0,o.yg)("inlineCode",{parentName:"h3"},"$store")),(0,o.yg)("p",null,"\u5728\u6a21\u677f\u4e2d\u4f7f\u7528"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-html"},"<template>\n  <div>{{$store.state.count}}</div>\n</template>\n\u590d\u5236\u4ee3\u7801\n")),(0,o.yg)("p",null,"\u5728\u9009\u9879\u5f0f\u5199\u6cd5\u4e2d\u4f7f\u7528"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},"export default {\n  mounted() {\n    console.log(this.$store);\n  }\n}\n")),(0,o.yg)("h2",{id:"4_\u8f85\u52a9\u51fd\u6570"},"4_\u8f85\u52a9\u51fd\u6570"),(0,o.yg)("p",null,"\u5728",(0,o.yg)("inlineCode",{parentName:"p"},"Vuex3"),"\u4e2d\u662f\u53ef\u4ee5\u4f7f\u7528\u8f85\u52a9\u51fd\u6570",(0,o.yg)("inlineCode",{parentName:"p"},"mapState\u3001mapGetters\u3001 mapMutations\u3001mapActions"),"\u6765\u7b80\u5316\u6211\u4eec",(0,o.yg)("inlineCode",{parentName:"p"},"store"),"\u7684\u64cd\u4f5c\u7684\u3002"),(0,o.yg)("p",null,"\u5728",(0,o.yg)("inlineCode",{parentName:"p"},"Vuex4"),"\u4e2d\u5e76\u6ca1\u6709\u5220\u9664\uff0c\u8fd8\u662f\u53ef\u4ee5\u4f7f\u7528\uff0c\u4f46\u662f\u53ea\u80fd\u5728",(0,o.yg)("inlineCode",{parentName:"p"},"Vue2"),"\u7684\u90a3\u79cd\u9009\u9879\u5f0f\u5199\u6cd5\u4e2d\u5b58\u5728\uff0c\u5982\u679c\u60f3\u8981\u4f7f\u7528\u7ec4\u5408\u5f0f\u5199\u6cd5",(0,o.yg)("inlineCode",{parentName:"p"},"setup"),"\uff0c\u662f\u6ca1\u529e\u6cd5\u4f7f\u7528\u7684\u3002"))}m.isMDXComponent=!0}}]);